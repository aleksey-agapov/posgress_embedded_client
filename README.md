# Встроенный PostgreSQL клиент для linux (embedded linux pg_client).
Программа предназначена для использования в контейнерах или устройствах с ограниченными ресурсами, для упрощения работы с таблицами БД Postgres.

### Основные отличия от аналогичных клиентов:
1. Возможность зарание готовить конфигурационные файлы для подключения к БД,которые в последствии можно либо пробрасывать в контейнер, либо помещать при его создании;
2. Возможность настраивать конфигурации из самой программ с последующим их сохранением в формате json;
3. Работать с БД можно с помощью SQL, так и использую упрощённый интерфейс;
4. Команды упрощённого интерфейса, ориентированы на максимальное упрощение работы пользователю с таблицами БД, за счёт минимизации вводимой информации и оптимизации представления запрошенных данных.

### Описание интерфейса программ
- После запуска программы всю информацию можно найти введя команду `help`;

```
$ ./pg_sql
Opened database successfully: messagedb
              server version: 110009
            protocol version: 3
Read cmd>>help
                                         ABOUT APP PG_CLIENT 
+-----------+----------------------------------------------------------------------------------------+
| command   | description                                                                            |
+-----------+----------------------------------------------------------------------------------------+
| reconnect | Reconnect to db.                                                                       |
|           |                                                                                        |
|      list | Show list tables.                                                                      |
|           |                                                                                        |
|   refresh | Refresh table list.                                                                    |
|           |                                                                                        |
|      info | Show info about selected table.                                                        |
|           | FORMAT: info {<NUMBER_TABLE>|<TABLE_NAME>}                                             |
|           |                                                                                        |
|      show | Show data selected tables.                                                             |
|           | FORMAT: show {<NUMBER_TABLE_1> ... <NUMBER_TABLE n>|<TABLE_NAME_1> ... <TABLE_NAME_N>} |
|           |              | <START_ROW> <ROW_NAMBERS_LIMIT>                                         |
|           |                                                                                        |
...
```

- Управление конфигурациями осуществляется с помощью команды `config`, для ускорения работы с конфигурациями, предусмотрена команда `set config`, которую необходимо выполнить сначало;

```
Read cmd>>set config
Read cmd>config>show
{"dbname":"messagedb","hostaddr":"127.0.0.1","password":"12345678","port":5432,"user":"postgres"}

Read cmd>config>edit dbname db21
Read cmd>config>save db21.json
Read cmd>config>
```
- Для применения изменений необходимо выполнить команду `reconnect`;

- Для выхода из режима управления конфигурацией используйте команду `set` без параметров;

- При подключении к БД, появляется возможность получить информацию о таблицах `list`;

```
Read cmd>>list
                       List tables                          
+--------+--------------------+-------------------------+
| number | schema             | table                   |
+--------+--------------------+-------------------------+
|      0 | public             | databasechangeloglock   |
|      1 | public             | databasechangelog       |
|      2 | public             | messages                |
...
```
- Доступ к ним возможен как по порядковому номеру, так и имени для этого применяются команды: `info`, `show`;

- Информацию о таблице предоставляется командой `info`;

```
Read cmd>>info 8

                                     Table info:public.price                                                             
+--------+---------------+---------+------------+-------------+-----------+----------+-----------+
| number | label         | type    | size       | constraint  | fk_schema | fk_table | fk_column |
+--------+---------------+---------+------------+-------------+-----------+----------+-----------+
|      1 | price         | integer |          0 | PRIMARY KEY |           |          |           |
|      2 | name_of_price | text    | 1073741824 |             |           |          |           |
+--------+---------------+---------+------------+-------------+-----------+----------+-----------+
Read cmd>>info 9

                                  Table info:public.cars                                                         
+--------+--------+---------+------------+-------------+-----------+----------+-----------+
| number | label  | type    | size       | constraint  | fk_schema | fk_table | fk_column |
+--------+--------+---------+------------+-------------+-----------+----------+-----------+
|      1 | car_id | integer |          0 | PRIMARY KEY |           |          |           |
|      2 | price  | integer |          0 | FOREIGN KEY | public    | price    | price     |
|      3 | name   | text    | 1073741824 |             |           |          |           |
|      4 | brand  | text    | 1073741824 |             |           |          |           |
+--------+--------+---------+------------+-------------+-----------+----------+-----------+
```

- Содержимое таблиц просматривается командой `show`, с возможность отображать с определённой позиции и необходимое количество строк, для ускорения работы можно использовать `set show`;

```
Read cmd>>show 8 9

+-------+---------------+--------+---------+-------+
| price | name_of_price | car_id | name    | brand |
+-------+---------------+--------+---------+-------+
|     0 | Zero          |      0 | X5      | BMW   |
|     1 | First         |      1 | Kalina  | Lada  |
|     2 | Second        |      2 | Sandero | Reno  |
+-------+---------------+--------+---------+-------+
Read cmd>>show 8 9

+-------+---------------+--------+---------+-------+
| price | name_of_price | car_id | name    | brand |
+-------+---------------+--------+---------+-------+
|     0 | Zero          |      0 | X5      | BMW   |
|     1 | First         |      1 | Kalina  | Lada  |
|     2 | Second        |      2 | Sandero | Reno  |
+-------+---------------+--------+---------+-------+
Read cmd>>set show
Read cmd>show>8 9|0 1

+-------+---------------+--------+------+-------+
| price | name_of_price | car_id | name | brand |
+-------+---------------+--------+------+-------+
|     0 | Zero          |      0 | X5   | BMW   |
+-------+---------------+--------+------+-------+
Read cmd>show>8 9|1 1

+-------+---------------+--------+--------+-------+
| price | name_of_price | car_id | name   | brand |
+-------+---------------+--------+--------+-------+
|     1 | First         |      1 | Kalina | Lada  |
+-------+---------------+--------+--------+-------+
```

- Команда show позволяет объединять таблици и не отображает дублирующиеся данные;

- Вводимые команды запоминаются и могут быть воспроизведены с помощью команды `history`;

```
Read cmd>>history

              HISTORY                      
+--------+-------------------------+
| number | command                 |
+--------+-------------------------+
|      0 | set config              |
|      1 | config show             |
|      2 | config edit dbname db21 |
|      3 | config save db21.json   |
|      4 | set                     |
|      5 | list                    |
|      6 | info 2                  |
|      7 | info 7                  |
|      8 | info 5                  |
+--------+-------------------------+
Read cmd>>history 1
{"dbname":"db21","hostaddr":"127.0.0.1","password":"12345678","port":5432,"user":"postgres"}

```
 